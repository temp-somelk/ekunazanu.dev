<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Anchit Roy" name=author><meta content="Using music theory to generate ambient music." name=description><meta content="Generative Music" property=og:title><meta content=article property=og:type><meta content="Using music theory to generate ambient music." property=og:description><meta content=https://ekunazanu.dev/lab/generative-music/ property=og:url><meta content=https://ekunazanu.dev/media/thumbnails/lab.airwaves.svg.png property=og:image><meta content="Air particles as black dots with a sine wave on a yellow background." property=og:image:alt><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=900 property=og:image:height><meta content=en_US property=og:locale><meta content=ekunazanu property=og:site_name><title>Generative Music</title><link href=https://ekunazanu.dev/lab/generative-music/ rel=cannonical><link href=https://ekunazanu.dev/atom.xml rel=alternate type=application/atom+xml><link href=https://ekunazanu.dev/misc/main.css rel=stylesheet><link href=https://ekunazanu.dev/misc/lab.favicon.png rel=icon><meta content=Zola name=generator><body><nav><ul><li><h2><a href=https://ekunazanu.dev>ekunazanu.dev</a></h2><li><a href=https://ekunazanu.dev/log>Log</a><li><a href=https://ekunazanu.dev/lab>Lab</a> ⟶</ul></nav><div class=print>https://ekunazanu.dev</div><main><article><h1>Generative Music</h1><p>This is another one of the more experimental posts.<p>I like music — a lot of people do. I also like math — a lot of people do <strong>not</strong>. It’s time to mix both these arts. It’s time to experiment and create.<h2 id=Music_Theory>Music Theory</h2><p>To create music, it first helps to have an understanding of what is sound and what makes certain sounds more pleasant than others.<p><img alt=airparts decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/airparticles><p>The particles above loosely represent air molecules. A vibrating or oscillating object can cause the air molecules to vibrate and oscillate as well, creating pressure waves. sound. If the air pressure at a point is plotted with respect to time, then the resulting graph is similar to a sine wave:<p><img alt="particles and corresponding wave below, (air pressure at ear at position on the left mapped on y axis, with time on moving x axis) adjustable pitch and amplitude" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><details open><summary>Sine waves</summary> The pressure graph draws out looks similar to sine wave since the source creating the vibrations is oscillating in a sine like motio .</details><p>The amplitude of the wave corresponds to the difference in sound pressure — the intensity or <strong>loudness</strong> of the sound, and the frequency of the wave corresponds to the <strong>pitch</strong> of the sound. From this point on, the abstracted wave representation will be used instead of air particles because it is simpler to represent and easier to comprehend.<h3>Intervals</h3><p>The previous example used a sound that had a singular frequency — this time, another wave is added:<p><img alt="two waves with adjustable freq -> same amplitude base frequency 1st in black and 2nd freq in gray" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><p>Try changing the frequency of the second sound (wave) to twice of the original. Now try it again with one and a half times the original. Try it with other frequencies too, and notice when they sound pleasant. When the freuqency of the two sounds are in simple ratios, they sound harmonious.<p>Music theory is based around these ratios, or <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Interval_(music) target=_blank>intervals</a>. A frequency ratio of 2:1 is the perfect octave. A ratio of 3:2 gives us the perfect fifth, 4:3 is the perfect fourth, 5:4 is the major third, 9:8 is the major second, and so on. The smallest of the intervals is the minor second also called the semitone, has a ratio of 16:15. The minor second along with a few other intervals sound <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Consonance_and_dissonance target=_blank>dissonant</a> since they do not have simple frequency ratios, but are still useful for creating tension.<p><img alt="all 12 notes with interval ratio multiple and interval name above -> base in black, all others in gray" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/static><p>This simple integer ratio interval system is the <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Just_intonation target=_blank>just intonation</a>. However because of the way the intervals are defined, it is <a href="https://www.youtube.com/watch?v=1Hqm0dYKUx4" rel="noopener nofollow noreferrer" target=_blank>mathematically impossible</a> to get a perfect scale that have consistent interval ratios between any other two notes in the scale. Instead, the <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Equal_temperament target=_blank>equal temperament</a> (equally spaced intervals) system is used to minimize the <em>overall</em> deviations in intonation.<p><img alt="All notes with equal temperament ratio multiple (both root 2 and decimal) and interval name above" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/static><h3 id=-1>Scales</h3><p>There are twelve notes in music theory — A, A#, B, C, C#, D, D#, E, F, F#, G, G# — or if using flats, then A, B♭, B, C, D♭, D, E♭, E, F, G♭, G, A♭. It’s unnecessarily complicated, but that’s just the way it is. The most common standard frequency around which the other notes are derived from, is 440Hz. All other notes are derived using the interval ratios mentioned before.<p><img alt="all notes with note name (A to G#/Aflat) and frequencies below and fixed ratio multiple BUT NO interval name above" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/static><p>Note: There is more than one <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Octave target=_blank>octave</a>, but we’ll restrict ourselves to one to keep things simpler.<p><img alt="All notes (bigger superset from C1 to C7) with and note name below and ratio multiple/divisor above NO interval name zoomed out ABOVE and zoomed in on one octave A4 - G#4 (same as above) BELOW" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/static><p>From these twelve notes, a subset can be selected to get a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Scale_(music) target=_blank>scale</a>. Scales can be described by their number of notes and by the structure of their intervals, to set a specific ‘mood’ for the melody. Usually music in a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Major_scale target=_blank>major scale</a> sounds upbeat, while music in <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Minor_scale target=_blank>minor scales</a> sound melancholic. <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Pentatonic_scale target=_blank>Pentatonic scales</a> are similar but have five notes instead. <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Mode_(music) target=_blank>Modes</a> are similar in the sense they define the structure of intervals, but are generalized; not necessarily linked to specific <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Key_(music) target=_blank>keys</a>, and have eight notes.<p>Here’s an interactive example to get a sense of different scales and modes:<p><img alt="all twelve notes - scrollable. on top interval name - fixed. clicking on the note horizontal scrolls twelve notes to get new base note. keys of scale are highlighted with colored background circle. dropdown menu to select scale/mode. in case of Modes, remove notes and only show background circle — to emphasize interval structure. Bottom -> “Scale of C/D#/etc or Mixolydian/Ionian Mode” and play button below. play individual notes in asc. order" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><h3 id=-2>Chords</h3><p>When two notes are played separately in succession, it is called a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Melody target=_blank>melodic interval</a>. When the two notes are played in unison, it is called a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Harmony target=_blank>harmonic interval</a>. And when three or more notes are played simultaneously, it is a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Chord_(music) target=_blank>chord</a>. Except <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Power_chord target=_blank>power chords</a> (consiting of two notes) are a thing, and <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Chord_(music) target=_blank>arpeggios</a> (broken chords) can be chords too sometimes, so the definition is somewhat loose. Usually, chords are triads — consiting of the root note, a major or minor third, and a perfect fifth.<p>Again, below is an example to experiment with different chords:<p><img alt="all twelve notes - scrollable. on top interval name - fixed. clicking on the note horizontal scrolls twelve notes to get new base note. keys of scale are highlighted with colored background circle. dropdown menu to select chord. First row same as above example - select scale. Second row for chords, using different color for background circle. Bottom -> “CMaj/D#Min/GMaj7 etc Chord” and play button below. play in unison once." decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><h3 id=-3>Dynamics</h3><p>We discussed about the frequency or pitch of sounds, but the <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Dynamics_(music) target=_blank>amplitude or loudness</a> can just as well be altered to express a feeling. The loudness of a section can ascend (crescedo) to create drama and tension, or it can gradually descend (decrescendo) after resolving the tension. Sounds can also be soft and quiet (piano) to emphasize the pieces that are strong and loud (forte) following them.<h3 id=-4>Timbre</h3><p>Going back to sound waves, it is important to specify that so far we’ve only been dealing with sine waves. But waveforms other than the sinusoid exist too — notable ones include the square wave, triangular wave, and sawtooth wave. These however sound different when compared against the sine waves — even at the same frequency.<p><img alt="square, sawtooth, triangular, sine at same (adjustable) freq play buttons for each below/on the side" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><p>Using <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Fourier_analysis target=_blank>fourier analysis</a>, these waves can be decomposed into multiple sine waves. The human ear perceives the square wave (and the sawtooth and triangular wave for that matter) as a group of multiple sine waves with frequencies.<p><img alt="decomposed square,trian,sawtooth to sine frequencies" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interative><p>Try creating your own waveform to see how it sounds at the frequency:<p><img alt="self waveform draw and play with frequency selector slider and play button" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/interactive><p>Similarly, different instruments have different and unique waveforms and hence sound different even at the same frequency. This is why instruments sound different even when playing the same notes. Notes played on some instruments like guitars or pianos quickly become quieter over time — the change in amplitude of the sound over time, described by their <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Envelope_(music) target=_blank>envelope</a> — differ based on the instrument, also giving each of them a unique tone. The unique tone quality of an instrument is called its <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Timbre target=_blank>timbre</a>. For example, this is the waveform and envelope of a piano and a guitar playing at 440Hz.<p><img alt="piano and guitar difference" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/maybevideo><h3 id=-5>Rhythm</h3><p>Try playing these beats:<p><img alt="irregular beats" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/audio> <img alt="regular beats" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/audio> <img alt="waltz beats" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/audio><p>The first beat is random, and does not necessarily sound enjoyable. The second is periodic, and is slightly more pleasant but nonetheless feels monotonous and dull. The last one feels rhythmic and dynamic; more enjoyable compared to the previous two. One way to make music sound more satisfying is to use stick to regular pulse beat groupings and accentuating certain beats — using a <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Metre_(music) target=_blank>metre</a>. The <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Time_signature target=_blank>number</a> of beats per <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Bar_(music) target=_blank>grouping</a> is usually four or three — called <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Duple_and_quadruple_metre#Quadruple_metre target=_blank>common time</a> and <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Triple_metre target=_blank>waltz</a> respectively.<p>Even after sticking to a meter, the music might sound rhythmic for a while, but if played long enough, even it will begin to sound repetitive. The obvious way to go about it is to introduce variations in the duration of certain notes, while still loosely sticking to the selected beat structure. Notes can be half, twice, quadruple the duration of a single beat, or <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Note_value target=_blank>somewhere in between</a>.<p>While using certain rhythm patterns can make music sound structured and more pleasing, it can also be used to set the of vibe of the music. The number of <a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Tempo target=_blank>beats per minute</a> can be varied to express emotions. Music with a fast tempo sounds lively and energetic, while music with a slow tempo sounds sad and mellow.<p><img alt="upbeat music" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/audio> <img alt="slow sad song" decoding=async loading=lazy src=https://ekunazanu.dev/lab/generative-music/audio><h2 id=-6>Playground</h2><p>On that note (pun not intended), it’s time to see wha the amalgamation of all the previously mentioned parameters has all led to.<hr><h2 id=-7>References</h2><ul><li>Make sounds similar to Limbo game OST<li>https://ivanish.ca/diminished-fifth/<li>https://generative.fm/<li>https://ciechanow.ski/sound/<li>search for algorithmic composition<li>Alt -> https://alterebro.com/ for generative images<li>https://www.youtube.com/@marcevanstein<li>https://learningmusic.ableton.com/make-beats/tempo-and-genre.html</ul></article></main><footer><a href=https://ekunazanu.dev/more#terms-of-use>© 2024</a> <a href=https://ekunazanu.dev>Anchit Roy</a> · <a rel="noopener nofollow noreferrer" href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a></footer>